"use strict";const designLegend=document.querySelector(".js-design-legend"),fillLegend=document.querySelector(".js-fill-legend"),shareLegend=document.querySelector(".js-share-legend"),designForm=document.querySelector(".js-design-form"),fillForm=document.querySelector(".js-fill-form"),shareForm=document.querySelector(".js-share-form"),shareArrow=document.querySelector(".js-share-arrow"),fillArrow=document.querySelector(".js-fill-arrow"),designArrow=document.querySelector(".js-design-arrow"),buttonPalette1=document.querySelector(".js-buttonpalette1"),buttonPalette2=document.querySelector(".js-buttonpalette2"),buttonPalette3=document.querySelector(".js-buttonpalette3"),previewDiv=document.querySelector(".js-preview-div"),previewList=document.querySelector(".js-list");let data={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};const inputs=[{palette:"",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""}],allInputsList=document.querySelectorAll(".js-input"),buttonReset=document.querySelector(".js-reset"),previewName=document.querySelector(".js-name"),previewJob=document.querySelector(".js-preview-job"),previewMail=document.querySelector(".js-icon-e-mail"),previewPhone=document.querySelector(".js-icon-mobile"),previewLinkedin=document.querySelector(".js-icon-linkedin"),previewGithub=document.querySelector(".js-icon-github"),errorMsg=document.querySelectorAll(".js-error"),sendBtn=document.querySelector(".js-create-btn"),twitterBtn=document.querySelector(".js-twitter-btn"),linkCard=document.querySelector(".js-create-link"),inputName=document.querySelector(".js-name-input"),inputJob=document.querySelector(".js-job-input"),inputPhone=document.querySelector(".js-phone-input"),inputEmail=document.querySelector(".js-email-input"),inputLinkedin=document.querySelector(".js-linkedin-input"),inputGithub=document.querySelector(".js-github-input"),inputPhoto=document.querySelector(".js-photo-input"),twitterSection=document.querySelector(".js-twitterSection");function closeAllSections(){designForm.classList.add("collapsed"),fillForm.classList.add("collapsed"),shareForm.classList.add("collapsed")}function turnDownAllArrows(){designArrow.classList.add("arrow-collapsed"),fillArrow.classList.add("arrow-collapsed"),shareArrow.classList.add("arrow-collapsed")}function openAndTurnDesignSection(){designForm.classList.remove("collapsed"),designArrow.classList.remove("arrow-collapsed")}function handleClickDesign(e){closeAllSections(),turnDownAllArrows(),openAndTurnDesignSection()}function openAndTurnFillSection(){fillForm.classList.remove("collapsed"),fillArrow.classList.remove("arrow-collapsed")}function handleClickFill(e){closeAllSections(),turnDownAllArrows(),openAndTurnFillSection()}function openAndTurnShareSection(){shareForm.classList.remove("collapsed"),shareArrow.classList.remove("arrow-collapsed")}function handleClickShare(e){closeAllSections(),turnDownAllArrows(),openAndTurnShareSection()}designLegend.addEventListener("click",handleClickDesign),fillLegend.addEventListener("click",handleClickFill),shareLegend.addEventListener("click",handleClickShare);const localStorageData=JSON.parse(localStorage.getItem("formData"));function updatePreview(){""===data.name?previewName.innerHTML="Nombre y Apellidos":previewName.innerHTML=data.name,""===data.job?previewJob.innerHTML="Front-end developer":previewJob.innerHTML=data.job,previewMail.href="mailto:"+data.email,previewPhone.href="tel:"+data.phone,previewLinkedin.href="https://linkedin.com/in/"+data.linkedin,previewGithub.href="https://github.com/"+data.github}console.log(data),localStorageData&&(data=localStorageData,updatePreview(),inputName.value=data.name,inputJob.value=data.job,inputEmail.value=data.email,inputPhone.value=data.phone,inputLinkedin.value=data.linkedin,inputGithub.value=data.github);const handleClickReset=()=>{data.palette=1,data.name="",data.job="",data.phone="",data.email="",data.linkedin="",data.github="",data.photo="",updatePreview();for(let e=0;e<allInputsList.length;e++)allInputsList[e].value=""};function deletePalette2(){previewDiv.classList.remove("palette2"),previewList.classList.remove("palette2")}function deletePalette3(){previewDiv.classList.remove("palette3"),previewList.classList.remove("palette3")}function addPalette2(){previewDiv.classList.add("palette2"),previewList.classList.add("palette2")}function addPalette3(){previewDiv.classList.add("palette3"),previewList.classList.add("palette3")}function handleClickPalette1(e){deletePalette2(),deletePalette3()}function handleClickPalette2(e){deletePalette3(),addPalette2()}function handleClickPalette3(e){deletePalette2(),addPalette3()}function showErrorMsg(){for(let e=0;e<errorMsg.length;e++)errorMsg[e].innerHTML="",errorMsg[e].innerHTML+='<i class="fa-solid fa-circle-exclamation"></i> Introduce tu '+errorMsg[e].id,console.log(errorMsg[e].id)}function addClassError(){for(const e of allInputsList)e.classList.add("js-border-input")}function handleInputForm(e){data[e.target.name]=e.target.value,updatePreview(),""===e.target.value&&(showErrorMsg(),addClassError()),localStorage.setItem("formData",JSON.stringify(data)),console.log(data)}buttonReset.addEventListener("click",handleClickReset),buttonPalette1.addEventListener("click",handleClickPalette1),buttonPalette2.addEventListener("click",handleClickPalette2),buttonPalette3.addEventListener("click",handleClickPalette3);for(let e=0;e<allInputsList.length;e++)allInputsList[e].addEventListener("input",handleInputForm);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result,console.log(data)}function handleClickSend(e){e.preventDefault(),fetch("https://dev.adalab.es/api/card/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{e.success&&(linkCard.innerHTML=e.cardURL,linkCard.href=e.cardURL,twitterSection.classList.remove("display--none"),sendBtn.classList.add("clicked"))})}fileField.addEventListener("change",getImage),sendBtn.addEventListener("click",handleClickSend);